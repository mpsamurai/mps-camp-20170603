<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <script type="text/javascript">
        var checkPalindrome = function (str, without) {
            if (without != undefined) {
                // 正規表現による除去
                str = str.replace(new RegExp(without, 'g'), '');
                // スプリットによる除去
//                str = str.split(without).join('');
            }
            var strlen = str.length;
            if (strlen == 1) {
                return true;
            }
            var pre = '';
            var after = '';
            for (var i = 0; i < strlen; i++) {
                if (i < (strlen / 2)) {
                    // 前から一文字切り出し
                    pre = str.slice(i, (i + 1));
                    // 後から一文字切り出し
                    var afterPosition = ((i + 1) * -1);
                    if (i == 0) {
                        after = str.slice(afterPosition);
                    } else {
                        after = str.slice(afterPosition, (afterPosition + 1));
                    }
                    // 比較
                    if (pre != after) {
                        return false;
                    }
                } else {
                    break;
                }
            }
            return true;
        }

        console.log(checkPalindrome('abcba'));
        console.log(checkPalindrome('abccba'));
        console.log(checkPalindrome('ab cba', ' '));
        console.log(checkPalindrome('ab cb a', ' '));
        console.log(checkPalindrome('ab cb  a', ' '));
        console.log(checkPalindrome('トマト,トマト', ','));
        console.log(checkPalindrome('トマト,トマ,ト', ','));

    </script>
</body>
</html>
