<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <h1>DOM Sample</h1>

    <table border="1">
        <tr>
            <td>x1:</td>
            <td><input type="text" name="x1" id="x1" value="" /></td>
        </tr>
        <tr>
            <td>x2:</td>
            <td><input type="text" name="x2" id="x2" value="" /></td>
        </tr>
        <tr>
            <td>x3:</td>
            <td><input type="text" name="x3" id="x3" value="" /></td>
        </tr>
        <tr>
            <td>sigmoid:</td>
            <td>
                <select name="sigmoid" id="sigmoid">
                    <option value="1">Logistic Sigmoid</option>
                    <option value="2">TanH</option>
                </select>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <button id="calc">calc Neural</button>
            </td>
        </tr>
    </table>

    <div id="content"></div>

    <script type="text/javascript">
        /**
         * Neural
         * @param x
         * @constructor
         */
        // コンストラクタ
        var Neural = function(x, w) {
            this.x = x;
            this.w = w;
            this.s = 0;
        }
        // 入力をセット
        Neural.prototype.setX = function (x) {
            this.x = x;
        }
        // 重み付けを取得
        Neural.prototype.getW = function () {
            return this.w;
        }
        // 入力値の合計を計算
        Neural.prototype.setS = function () {
            for (var i = 0; i < this.x.length; i++) {
                this.s += (this.x[i] * this.w[i]);
            }
        }
        // 入力値の合計を取得
        Neural.prototype.getS = function () {
            return this.s;
        }
        // 出力
        Neural.prototype.getOutput = function () {
            return;
        }

        /**
         * NeuralLogisticSigmaid
         * @param x
         * @constructor
         * Neural を継承し、出力メソッド内の処理を定義
         */
        // コンストラクタ
        var NeuralLogisticSigmaid = function(x, w) {
            Neural.call(this, x, w);
        }
        NeuralLogisticSigmaid.prototype = Object.create(Neural.prototype);
        NeuralLogisticSigmaid.prototype.getOutput = function() {
            this.setS();
            var y = 1 / (1 + Math.pow(Math.E, -this.getS()));
            return y;
        }

        /**
         * NeuralTanH
         * @param x
         * @constructor
         * Neural を継承し、出力メソッド内の処理を定義
         */
        // コンストラクタ
        var NeuralTanH = function(x, w) {
            Neural.call(this, x, w);
        }
        NeuralTanH.prototype = Object.create(Neural.prototype);
        NeuralTanH.prototype.getOutput = function() {
            this.setS();
            var y = Math.tanh(this.getS());
            return y;
        }

        /**
         * ボタン押下時、Neural計算し、表示
         * @type {Element}
         */
        var calcContentBtn = document.getElementById("calc");
        calcContentBtn.addEventListener("click", function () {
            // 項目の入力値を取得
            var objX1 = document.getElementsByName("x1");
            var x1 = objX1[0].value;
            var objX2 = document.getElementsByName("x2");
            var x2 = objX2[0].value;
            var objX3 = document.getElementsByName("x3");
            var x3 = objX3[0].value;
            var objSigmaid = document.getElementsByName("sigmoid");
            var sigmoid = objSigmaid[0].value;

            // 処理分け
            var x = new Array(x1, x2, x3);
            var w = new Array(1, 3, 5);
            var viewTitle = '';
            switch (sigmoid) {
                // LogisticSigmaid
                case "1":
                    var nls = new NeuralLogisticSigmaid(x, w);
                    viewTitle = nls.getOutput();
                    break;
                // TanH
                case "2":
                    var nth = new NeuralTanH(x, w);
                    viewTitle = nth.getOutput();
                    break;
                default:
                    break;
            }

            // 表示処理
            var content = document.getElementById("content");
            var subTitle = document.createElement("h2");
            var titleText = document.createTextNode(viewTitle);
            subTitle.appendChild(titleText);
            content.appendChild(subTitle);
        });
    </script>
</body>
</html>
